version: "3"
# TODO update catalog to have ip: 192.168.50.100 on the host.
# TODO update order to have ip: 192.168.50.101 on the host.
services:
  catalog:
    build: ./BazarCatalogApi
    ports:
      - 5000:80
      - 5001:443
    environment:
      - ASPNETCORE_URLS=https://+;http://+
      - ASPNETCORE_Kestrel__Certificates__Default__Password=mohammed
      - ASPNETCORE_Kestrel__Certificates__Default__Path=/root/.aspnet/https/BazarCatalogApi.pfx
    volumes:
      - ./BazarCatalogApi/Books.db:/app/Books.db
      - ./BazarCatalogApi.pfx:/root/.aspnet/https/BazarCatalogApi.pfx
  order:
    build: ./BazarOrderApi
    ports:
      - 5002:80
      - 5003:443
    environment:
      - ASPNETCORE_URLS=https://+;http://+
      - ASPNETCORE_Kestrel__Certificates__Default__Password=mohammed
      - ASPNETCORE_Kestrel__Certificates__Default__Path=/root/.aspnet/https/BazarOrderApi.pfx
    volumes:
      - ./BazarOrderApi/Orders.db:/app/Orders.db
      - ./BazarOrderApi.pfx:/root/.aspnet/https/BazarOrderApi.pfx